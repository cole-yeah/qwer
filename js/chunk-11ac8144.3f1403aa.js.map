{"version":3,"sources":["webpack:///./src/views/canvas/meteors/index.vue","webpack:///./src/views/canvas/meteors/Factory.js","webpack:///./src/views/canvas/meteors/index.vue?32d8","webpack:///./src/views/canvas/meteors/index.vue?b5e6"],"names":["class","id","Moon","constructor","x","y","r","ctx","this","draw","beginPath","arc","Math","PI","closePath","shadowBlur","shadowColor","fillStyle","fill","Star","width","height","super","isShining","random","move","setTimeout","name","starsCanvas","moonCanvas","starsCtx","moonCtx","starsList","timer","init","methods","document","body","clientWidth","clientHeight","initMoon","initStar","animate","resize","getElementById","getContext","moon","starsNumber","Array","from","length","star","fillRect","forEach","requestAnimationFrame","window","onresize","clearTimeout","render","__scopeId"],"mappings":"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","file":"js/chunk-11ac8144.3f1403aa.js","sourcesContent":["<template>\r\n  <div class=\"meteorsBg\">\r\n    <canvas class=\"canvas\" id=\"stars\"></canvas>\r\n    <canvas class=\"canvas\" id=\"moon\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Moon, Star } from \"./Factory\";\r\nexport default {\r\n  name: \"Meteors\",\r\n  data() {\r\n    return {\r\n      starsCanvas: null,\r\n      moonCanvas: null,\r\n      starsCtx: null,\r\n      moonCtx: null,\r\n      starsList: [],\r\n      width: 0,\r\n      height: 0,\r\n      timer: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.width = document.body.clientWidth;\r\n      this.height = document.body.clientHeight;\r\n      this.initMoon();\r\n      this.initStar();\r\n      //动画\r\n      this.animate();\r\n      this.resize();\r\n    },\r\n    initMoon() {\r\n      this.moonCanvas = document.getElementById(\"moon\");\r\n      this.moonCanvas.width = this.width;\r\n      this.moonCanvas.height = this.height / 3;\r\n      this.moonCtx = this.moonCanvas.getContext(\"2d\");\r\n      const moon = new Moon({\r\n        x: this.moonCanvas.width - 100,\r\n        y: 60,\r\n        r: 30,\r\n        ctx: this.moonCtx\r\n      });\r\n      moon.draw();\r\n    },\r\n    initStar() {\r\n      this.starsCanvas = document.getElementById(\"stars\");\r\n      this.starsCanvas.width = this.width;\r\n      this.starsCanvas.height = this.height;\r\n      this.starsCtx = this.starsCanvas.getContext(\"2d\");\r\n      //星星数量\r\n      const starsNumber = 60;\r\n      const random = Math.random;\r\n      this.starsList = Array.from({ length: starsNumber }, () => {\r\n        const star = new Star({\r\n          x: random() * this.starsCanvas.width,\r\n          y: random() * (this.starsCanvas.height / 3),\r\n          ctx: this.starsCtx,\r\n          r: random(),\r\n          width: this.starsCanvas.width,\r\n          height: this.starsCanvas.height\r\n        });\r\n        star.draw();\r\n        return star;\r\n      });\r\n    },\r\n    animate() {\r\n      if (!this.starsList?.length) return;\r\n      this.starsCtx.fillStyle = \"rgba(0, 0, 0, 0.2)\";\r\n      this.starsCtx.fillRect(\r\n        0,\r\n        0,\r\n        this.starsCanvas.width,\r\n        this.starsCanvas.height\r\n      );\r\n      this.starsList.forEach(star => star.move());\r\n      requestAnimationFrame(this.animate);\r\n    },\r\n    resize() {\r\n      window.onresize = () => {\r\n        this.timer && clearTimeout(this.timer);\r\n\r\n        this.width = document.body.clientWidth;\r\n        this.height = document.body.clientHeight;\r\n        this.starsList = [];\r\n        this.timer = setTimeout(() => this.init(), 50);\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.meteorsBg {\r\n  background-color: rgb(10, 10, 32);\r\n  width: 100%;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n.canvas {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n</style>\r\n","export class Moon {\r\n  constructor({ x, y, r, ctx }) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.r = r;\r\n    this.ctx = ctx;\r\n  }\r\n  draw() {\r\n    this.ctx.beginPath();\r\n    /**\r\n     * x: 圆的中心的 x 坐标\r\n     * y: 圆的中心的 y 坐标\r\n     * r: 圆的半径\r\n     * sAngle: 起始角，以弧度计。（弧的圆形的三点钟位置是 0 度）\r\n     * eAngle: 结束角，以弧度计\r\n     * counterclockwise: 可选。规定应该逆时针还是顺时针绘图。False = 顺时针，true = 逆时针\r\n     */\r\n    this.ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);\r\n    this.ctx.closePath();\r\n    this.ctx.shadowBlur = this.r + 5;\r\n    this.ctx.shadowColor = \"#fff\";\r\n    this.ctx.fillStyle = \"rgba(255, 255, 255, 0.6)\";\r\n    this.ctx.fill();\r\n  }\r\n}\r\n\r\nexport class Star extends Moon {\r\n  constructor({ x, y, r, ctx, width, height }) {\r\n    super({ x, y, r, ctx });\r\n    this.width = width;\r\n    this.height = height;\r\n    this.isShining = Math.random() > 0.9;\r\n  }\r\n  draw() {\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);\r\n    this.ctx.closePath();\r\n    this.ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\r\n    this.ctx.fill();\r\n  }\r\n  move() {\r\n    this.x += 0.04;\r\n    if (this.isShining) {\r\n      this.x += 1;\r\n      this.y += 2;\r\n    }\r\n    if (this.x >= this.width) {\r\n      this.isShining = false;\r\n      this.x = 0;\r\n      this.y = Math.random() * (this.height / 3);\r\n      setTimeout(\r\n        () => (this.isShining = Math.random() > 0.9),\r\n        20000 * Math.random()\r\n      );\r\n    }\r\n    if (this.y >= this.height / 2) {\r\n      this.isShining = false;\r\n      this.x = Math.random();\r\n      this.y = Math.random() * (this.height / 3);\r\n      setTimeout(() => (this.isShining = true), 10000 * Math.random());\r\n    }\r\n    this.draw();\r\n  }\r\n}\r\n","import { render } from \"./index.vue?vue&type=template&id=d8cc642a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=d8cc642a&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d8cc642a\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=d8cc642a&lang=less&scoped=true\""],"sourceRoot":""}